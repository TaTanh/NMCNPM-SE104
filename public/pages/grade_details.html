<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Nhập điểm – Chi tiết</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/layout/styles.css">
</head>

<body class="dashboard-body">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <img src="/assets/uit_logo.png" alt="UIT Logo">
            <span>QL Học Sinh</span>
        </div>

        <nav class="sidebar-menu">
            <a href="/pages/dashboard.html">Dashboard</a>
            <a href="/pages/students.html">Quản lý học sinh</a>
            <a href="/pages/classes.html">Quản lý lớp học</a>
            <a href="/pages/subject_list.html">Quản lý môn học</a>
            <a href="/pages/grade_select.html" class="active">Bảng điểm</a>
            <a href="/pages/reports.html">Báo cáo tổng kết</a>
            <a href="/pages/settings.html">Cài đặt hệ thống</a>
        </nav>
    </aside>

    <!-- MAIN -->
    <div class="main">

        <!-- HEADER -->
        <header class="topbar">
            <div class="page-title">
                10A1 – Toán – Học kỳ 1
                <span class="tag-pill">Bảng nhập điểm</span>
            </div>
            <div class="user-info">
                <span>Xin chào, Admin</span>
                <img src="/assets/user.png" class="avatar" alt="user">
            </div>
        </header>

        <!-- CONTENT -->
        <div class="content">

            <!-- HÀNG TIÊU ĐỀ + NÚT QUY ĐỊNH -->
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
                <div style="font-size:14px; color:#6b7280;">
                    Nhập điểm cho lớp 10A1 – môn Toán – Học kỳ 1
                </div>
                <button id="btn-open-rules" class="btn btn-outline">
                    Thay đổi quy định
                </button>
            </div>

            <!-- BẢNG NHẬP ĐIỂM -->
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Mã HS</th>
                            <th>Họ tên</th>
                            <th>KT 15 phút (x1)</th>
                            <th>KT 1 tiết (x2)</th>
                            <th>Cuối kỳ (x3)</th>
                            <th>Điểm TB Môn</th>
                        </tr>
                    </thead>
                    <tbody id="gradeTableBody">
                        <tr>
                            <td>HS001</td>
                            <td>Nguyễn Văn A</td>
                            <td><input type="number" min="0" max="10" step="0.1" value="8.0"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="7.5"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="9.0"></td>
                            <td class="grade-avg">8.3</td>
                        </tr>
                        <tr>
                            <td>HS002</td>
                            <td>Trần Thị B</td>
                            <td><input type="number" min="0" max="10" step="0.1" value="7.0"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="8.0"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="7.5"></td>
                            <td class="grade-avg">7.6</td>
                        </tr>
                        <tr>
                            <td>HS003</td>
                            <td>Lê Văn C</td>
                            <td><input type="number" min="0" max="10" step="0.1"></td>
                            <td><input type="number" min="0" max="10" step="0.1"></td>
                            <td><input type="number" min="0" max="10" step="0.1"></td>
                            <td class="grade-avg">–</td>
                        </tr>
                        <tr>
                            <td>HS004</td>
                            <td>Phạm Thị D</td>
                            <td><input type="number" min="0" max="10" step="0.1" value="9.0"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="8.5"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="9.5"></td>
                            <td class="grade-avg">9.0</td>
                        </tr>
                        <tr>
                            <td>HS005</td>
                            <td>Hoàng Văn E</td>
                            <td><input type="number" min="0" max="10" step="0.1" value="6.5"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="7.0"></td>
                            <td><input type="number" min="0" max="10" step="0.1" value="6.0"></td>
                            <td class="grade-avg">6.5</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="modal-footer" style="margin-top: 14px;">
                <button class="btn btn-outline">Xuất Excel</button>
                <button class="btn btn-primary">Lưu</button>
            </div>

        </div><!-- content -->
    </div><!-- main -->

    <!-- POPUP QUY ĐỊNH – DÙNG CHUNG VỚI NHẬP ĐIỂM -->
    <div id="rules-modal"
         style="display:none; position:fixed; inset:0; background:rgba(15,23,42,0.45); 
                z-index:50; align-items:center; justify-content:center;">
        <div style="background:white; border-radius:12px; padding:20px 24px; max-width:720px; width:100%;
                    box-shadow:0 20px 40px rgba(15,23,42,0.35);">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                <h2 style="font-size:18px; margin:0;">Thay đổi quy định hệ thống</h2>
                <button id="btn-close-rules" class="btn btn-outline" style="padding:4px 10px;">Đóng</button>
            </div>

            <!-- PHẦN GIAO DIỆN COPY TỪ rules.html -->
            <div class="config-grid">
                <div class="config-card">
                    <div class="config-label">Số lượng tối đa học sinh / lớp</div>
                    <input type="number" value="45" min="1" max="60">
                    <div class="config-hint">Ví dụ: 45 học sinh</div>
                </div>

                <div class="config-card">
                    <div class="config-label">Số môn học</div>
                    <input type="number" value="13" min="1">
                    <div class="config-hint">Áp dụng cho 1 năm học</div>
                </div>

                <div class="config-card">
                    <div class="config-label">Mức điểm chuẩn (đạt)</div>
                    <input type="number" value="5.0" min="0" max="10" step="0.5">
                    <div class="config-hint">Ví dụ: 5.0</div>
                </div>

                <div class="config-card">
                    <div class="config-label">Hệ số điểm kiểm tra 15 phút</div>
                    <input type="number" value="1" min="0" max="5" step="0.5">
                </div>

                <div class="config-card">
                    <div class="config-label">Hệ số điểm kiểm tra 1 tiết</div>
                    <input type="number" value="2" min="0" max="5" step="0.5">
                </div>

                <div class="config-card">
                    <div class="config-label">Hệ số điểm cuối kỳ</div>
                    <input type="number" value="3" min="0" max="5" step="0.5">
                </div>
            </div>

            <div class="rules-footer" style="margin-top:16px; text-align:right;">
                <button class="btn btn-primary">Lưu thay đổi</button>
            </div>
        </div>
    </div>

    <!-- JS SHOW/HIDE POPUP QUY ĐỊNH -->
    <script>
        const btnOpenRules  = document.getElementById('btn-open-rules');
        const btnCloseRules = document.getElementById('btn-close-rules');
        const rulesModal    = document.getElementById('rules-modal');

        if (btnOpenRules && btnCloseRules && rulesModal) {
            btnOpenRules.addEventListener('click', () => {
                rulesModal.style.display = 'flex';
            });

            btnCloseRules.addEventListener('click', () => {
                rulesModal.style.display = 'none';
            });

            // click ra ngoài để tắt
            rulesModal.addEventListener('click', (e) => {
                if (e.target === rulesModal) {
                    rulesModal.style.display = 'none';
                }
            });
        }
    </script>

</body>
</html>
